<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
</head>
<style>
    body {
        font-family: 'Arial', sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    h1 {
        color: #333;
    }

    .form-container {
        width: 60%;
        background-color: #fff;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin: 20px;
        /* Only use margin: auto to center horizontally */
    }



    input[type="text"],
    select {
        padding: 8px;
        box-sizing: border-box;
        width: 30%;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-bottom: 10px;
    }

    input[type="checkbox"] {
        margin-right: 5px;
    }


    button {
        padding: 10px;
        background-color: #4CAF50;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        margin-top: 15px;
    }

    #statusMessage {
        margin-top: 15px;
        color: #4CAF50;
        font-weight: bold;
    }

    /* เพิ่มสไตล์ CSS สำหรับปรับแต่ง <select> */
    #region_dropdown {
        padding: 8px;
        font-size: 14px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-shadow: none;
        width: 200px;
        /* ปรับขนาดตามความต้องการ */
        margin-bottom: 5%;
        margin-top: 5%;
    }
    .logo {
            width: 200px;
            /* ปรับขนาดรูปภาพให้พอดีกับขนาดที่กำหนดไว้ */
            object-position: 30% 38%;
            background-color: #ffffff;
            display: flex;
        }
</style>

<body>
    <div class="form-container">
        <img class="logo" src="https://cdn.discordapp.com/attachments/1171333981678080060/1186970967554134066/logo_PTT_3.png?ex=65952fdb&is=6582badb&hm=054c500f83a375c30361f6389ff1c61891735f0e44b85cf7dc67bcc0f3055583&" alt="logo">
        <h1>Poll Configurator</h1>

        <div. class="address-pair">
            <label for="evc_type">EVC_TYPE:</label>
            <input type="text" id="evc_type" name="evc_type" required>
        </div>
        <div class="form-container">
        </form>
        <!-- Address Pair 1 -->
        <div class="address-pair">
            <label for="start1">Start Address:</label>
            <input type="text" id="start1" name="start1" required>
            <label for="end1">End Address:</label>
            <input type="text" id="end1" name="end1" required>
            <label for="enable1">Enable:</label>
            <input type="checkbox" id="enable1" name="enable1" checked>
        </div>

        <!-- Address Pair 2 -->
        <div class="address-pair">
            <label for="start2">Start Address:</label>
            <input type="text" id="start2" name="start2" required>
            <label for="end2">End Address:</label>
            <input type="text" id="end2" name="end2" required>
            <label for="enable2">Enable:</label>
            <input type="checkbox" id="enable2" name="enable2" checked>
        </div>

        <!-- Address Pair 3 -->
        <div class="address-pair">
            <label for="start3">Start Address:</label>
            <input type="text" id="start3" name="start3" required>
            <label for="end3">End Address:</label>
            <input type="text" id="end3" name="end3" required>
            <label for="enable3">Enable:</label>
            <input type="checkbox" id="enable3" name="enable3" checked>
        </div>

        <!-- Address Pair 4 -->
        <div class="address-pair">
            <label for="start4">Start Address:</label>
            <input type="text" id="start4" name="start4" required>
            <label for="end4">End Address:</label>
            <input type="text" id="end4" name="end4" required>
            <label for="enable4">Enable:</label>
            <input type="checkbox" id="enable4" name="enable4" checked>
        </div>

        <!-- Address Pair 5 -->
        <div class="address-pair">
            <label for="start5">Start Address:</label>
            <input type="text" id="start5" name="start5" required>
            <label for="end5">End Address:</label>
            <input type="text" id="end5" name="end5" required>
            <label for="enable5">Enable:</label>
            <input type="checkbox" id="enable5" name="enable5" checked>
        </div>
        </form>

        <h1>Poll Billing</h1>
        </form>
        <div class="address-pair">
            <label for="start6">Start Address:</label>
            <input type="text" id="start6" name="start6" required>
            <label for="end6">End Address:</label>
            <input type="text" id="end6" name="end6" required>
            <label for="enable6">Enable:</label>
            <input type="checkbox" id="enable6" name="enable6" checked>
        </div>

        <!-- Address Pair 7 -->
        <div class="address-pair">
            <label for="start7">Start Address:</label>
            <input type="text" id="start7" name="start7" required>
            <label for="end7">End Address:</label>
            <input type="text" id="end7" name="end7" required>
            <label for="enable7">Enable:</label>
            <input type="checkbox" id="enable7" name="enable7" checked>
        </div>

        <!-- Address Pair 8 -->
        <div class="address-pair">
            <label for="start8">Start Address:</label>
            <input type="text" id="start8" name="start8" required>
            <label for="end8">End Address:</label>
            <input type="text" id="end8" name="end8" required>
            <label for="enable8">Enable:</label>
            <input type="checkbox" id="enable8" name="enable8" checked>
        </div>

        <!-- Address Pair 9 -->
        <div class="address-pair">
            <label for="start9">Start Address:</label>
            <input type="text" id="start9" name="start9" required>
            <label for="end9">End Address:</label>
            <input type="text" id="end9" name="end9" required>
            <label for="enable9">Enable:</label>
            <input type="checkbox" id="enable9" name="enable9" checked>
        </div>

        <!-- Address Pair 10 -->
        <div class="address-pair">
            <label for="start10">Start Address:</label>
            <input type="text" id="start10" name="start10" required>
            <label for="end10">End Address:</label>
            <input type="text" id="end10" name="end10" required>
            <label for="enable10">Enable:</label>
            <input type="checkbox" id="enable10" name="enable10" checked>
        </div>

        <!-- Address Pair 11 -->
        <div class="address-pair">
            <label for="start11">Start Address:</label>
            <input type="text" id="start11" name="start11" required>
            <label for="end11">End Address:</label>
            <input type="text" id="end11" name="end11" required>
            <label for="enable11">Enable:</label>
            <input type="checkbox" id="enable11" name="enable11" checked>
        </div>

        <!-- Address Pair 12 -->
        <div class="address-pair">
            <label for="start12">Start Address:</label>
            <input type="text" id="start12" name="start12" required>
            <label for="end12">End Address:</label>
            <input type="text" id="end12" name="end12" required>
            <label for="enable12">Enable:</label>
            <input type="checkbox" id="enable12" name="enable12" checked>
        </div>

        <!-- Address Pair 13 -->
        <div class="address-pair">
            <label for="start13">Start Address:</label>
            <input type="text" id="start13" name="start13" required>
            <label for="end13">End Address:</label>
            <input type="text" id="end13" name="end13" required>
            <label for="enable13">Enable:</label>
            <input type="checkbox" id="enable13" name="enable13" checked>
        </div>

        <!-- Address Pair 14 -->
        <div class="address-pair">
            <label for="start14">Start Address:</label>
            <input type="text" id="start14" name="start14" required>
            <label for="end14">End Address:</label>
            <input type="text" id="end14" name="end14" required>
            <label for="enable14">Enable:</label>
            <input type="checkbox" id="enable14" name="enable14" checked>
        </div>

        <!-- Address Pair 15 -->
        <div class="address-pair">
            <label for="start15">Start Address:</label>
            <input type="text" id="start15" name="start15" required>
            <label for="end15">End Address:</label>
            <input type="text" id="end15" name="end15" required>
            <label for="enable15">Enable:</label>
            <input type="checkbox" id="enable15" name="enable15" checked>
        </div>
        </form>


        <button type="button" onclick="saveToOracle()">Save to Oracle</button>
        <div id="statusMessage"></div>
</body>

<script>
    function saveToOracle() {
        var data = {};

        // Include EVC_TYPE in data
        data.evc_type = document.getElementById("evc_type").value;

        // Loop through address pairs 1 through 15
        for (var i = 1; i <= 15; i++) {
            var startKey = 'start' + i;
            var endKey = 'end' + i;
            var enableKey = 'enable' + i;

            data[startKey] = document.getElementById(startKey).value;
            data[endKey] = document.getElementById(endKey).value;
            data[enableKey] = document.getElementById(enableKey).checked ? 1 : 0;

            // Ensure all start and end values are provided
            if (!data[startKey] || !data[endKey]) {
                document.getElementById("statusMessage").innerHTML = "Please enter both start and end addresses for all pairs.";
                return;
            }
        }

        // Assuming 'data' contains the necessary start and end values
        data.enable_config = [];
        data.enable_billing = [];

        for (let i = 1; i <= 15; i++) {
            if (data[`enable${i}`] !== undefined) {
                if (i <= 5) {
                    data.enable_config.push(parseInt(data[`enable${i}`]));
                } else {
                    data.enable_billing.push(parseInt(data[`enable${i}`]));
                }
            }
        }

        fetch('/save_to_oracle', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                document.getElementById("statusMessage").innerHTML = data.message;
            })
            .catch((error) => {
                console.error('Error:', error);
                document.getElementById("statusMessage").innerHTML = "An error occurred while saving data.";
            });
    }
</script>

</html>