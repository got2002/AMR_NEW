<!DOCTYPE html>
<html lang="en">

<head>
    <!-- meta -->
    <meta charset="UTF-8">
    <meta name="description" content="NO Description">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="Prompt">
    <meta name="copyright" content="Copyright © 2025">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapping Billing</title>
    <!-- <link rel="stylesheet" href="style.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootstrap Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">



    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Bootstrap Datepicker Stylesheet and Script -->
    <!-- Option 1: Include in HTML -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
</head>
<style>
    /* Option 2: Import via CSS */
    @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css");
    @import url('https://fonts.googleapis.com/css?family=Roboto:400,500|Roboto+Mono:400,500');

    *,
    *::after,
    *::before {
        margin: 0;
        padding: 0;
        box-sizing: inherit;
    }

    html {
        box-sizing: border-box;
    }

    body {
        background: rgb(35, 50, 70);
        background: -moz-radial-gradient(top left, ellipse cover, rgba(35, 50, 70, 1) 0%, rgba(90, 113, 132, 1) 57%);
        background: -webkit-gradient(radial, top left, 0px, top left, 100%, color-stop(0%, rgba(35, 50, 70, 1)), color-stop(57%, rgba(90, 113, 132, 1)));
        background: -webkit-radial-gradient(top left, ellipse cover, rgba(35, 50, 70, 1) 0%, rgba(90, 113, 132, 1) 57%);
        background: -o-radial-gradient(top left, ellipse cover, rgba(35, 50, 70, 1) 0%, rgba(90, 113, 132, 1) 57%);
        background: -ms-radial-gradient(top left, ellipse cover, rgba(35, 50, 70, 1) 0%, rgba(90, 113, 132, 1) 57%);
        background: radial-gradient(ellipse at top left, rgba(35, 50, 70, 1) 0%, rgba(90, 113, 132, 1) 57%);
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#233246', endColorstr='#5a7184', GradientType=1);
    }

    body {
        margin: 0;
        padding: 0;
        line-height: 1;
        font-family: "PTT45Pride-Bold", sans-serif;
        font-weight: 400;
        font-size: 1rem;
        color: #cbcbcb;
    }

    @keyframes swing {
        0% {
            transform: rotate(0deg);
        }

        10% {
            transform: rotate(10deg);
        }

        30% {
            transform: rotate(0deg);
        }

        40% {
            transform: rotate(-10deg);
        }

        50% {
            transform: rotate(0deg);
        }

        60% {
            transform: rotate(5deg);
        }

        70% {
            transform: rotate(0deg);
        }

        80% {
            transform: rotate(-5deg);
        }

        100% {
            transform: rotate(0deg);
        }
    }

    @keyframes sonar {
        0% {
            transform: scale(0.9);
            opacity: 1;
        }

        100% {
            transform: scale(2);
            opacity: 0;
        }
    }

    body {
        font-size: 0.9rem;
    }

    .page-wrapper .sidebar-wrapper,
    .sidebar-wrapper .sidebar-brand>a,
    .sidebar-wrapper .sidebar-dropdown>a:after,
    .sidebar-wrapper .sidebar-menu .sidebar-dropdown .sidebar-submenu li a:before,
    .sidebar-wrapper ul li a i,
    .page-wrapper .page-content,
    .sidebar-wrapper .sidebar-search input.search-menu,
    .sidebar-wrapper .sidebar-search .input-group-text,
    .sidebar-wrapper .sidebar-menu ul li a,
    #show-sidebar,
    #close-sidebar {
        -webkit-transition: all 0.3s ease;
        -moz-transition: all 0.3s ease;
        -ms-transition: all 0.3s ease;
        -o-transition: all 0.3s ease;
        transition: all 0.3s ease;
    }

    /*----------------page-wrapper----------------*/

    .page-wrapper {
        height: 100vh;
    }

    .page-wrapper .theme {
        width: 40px;
        height: 40px;
        display: inline-block;
        border-radius: 4px;
        margin: 2px;
    }

    .page-wrapper .theme.chiller-theme {
        background: #1e2229;
    }

    /*----------------toggeled sidebar----------------*/

    .page-wrapper.toggled .sidebar-wrapper {
        left: 0px;
    }

    @media screen and (min-width: 768px) {
        .page-wrapper.toggled .page-content {
            padding-left: 300px;
        }
    }

    /*----------------show sidebar button----------------*/
    #show-sidebar {
        position: fixed;
        left: 0;
        top: 100px;
        border-radius: 0 4px 4px 0px;
        width: 35px;
        transition-delay: 0.3s;
    }

    .page-wrapper.toggled #show-sidebar {
        left: -40px;
    }

    /*----------------sidebar-wrapper----------------*/

    .sidebar-wrapper {
        width: 260px;
        height: 100%;
        max-height: 100%;
        position: fixed;
        top: 0;
        left: -300px;
        z-index: 999;
    }

    .sidebar-wrapper ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    .sidebar-wrapper a {
        text-decoration: none;
    }

    /*----------------sidebar-content----------------*/

    .sidebar-content {
        max-height: calc(100% - 30px);
        height: calc(100% - 30px);
        overflow-y: auto;
        position: relative;
    }

    .sidebar-content.desktop {
        overflow-y: hidden;
    }

    /*--------------------sidebar-brand----------------------*/

    .sidebar-wrapper .sidebar-brand {
        padding: 10px 20px;
        display: flex;
        align-items: center;
    }

    .sidebar-wrapper .sidebar-brand>a {
        text-transform: uppercase;
        font-weight: bold;
        flex-grow: 1;
    }

    .sidebar-wrapper .sidebar-brand #close-sidebar {
        cursor: pointer;
        font-size: 20px;
    }

    /*--------------------sidebar-header----------------------*/

    .sidebar-wrapper .sidebar-header {
        padding: 20px;
        overflow: hidden;
    }

    .sidebar-wrapper .sidebar-header .user-pic {
        float: left;
        width: 60px;
        padding: 2px;
        border-radius: 12px;
        margin-right: 15px;
        overflow: hidden;
    }

    .sidebar-wrapper .sidebar-header .user-pic img {
        object-fit: cover;
        height: 100%;
        width: 100%;
    }

    .sidebar-wrapper .sidebar-header .user-info {
        font-size: 27px;
        float: left;
    }

    .sidebar-wrapper .sidebar-header .user-info>span {
        display: block;
    }

    .sidebar-wrapper .sidebar-header .user-info .user-role {
        font-size: 16px;
    }

    .sidebar-wrapper .sidebar-header .user-info .user-status {
        font-size: 12px;
        margin-top: 4px;
    }

    .sidebar-wrapper .sidebar-header .user-info .user-status i {
        font-size: 10px;
        margin-right: 4px;

    }

    /*-----------------------sidebar-search------------------------*/

    .sidebar-wrapper .sidebar-search>div {
        padding: 10px 20px;
    }

    /*----------------------sidebar-menu-------------------------*/

    .sidebar-wrapper .sidebar-menu {
        padding-bottom: 10px;
    }

    .sidebar-wrapper .sidebar-menu .header-menu span {
        font-weight: bold;
        font-size: 14px;
        padding: 15px 20px 5px 20px;
        display: inline-block;
    }

    .sidebar-wrapper .sidebar-menu ul li a {
        display: inline-block;
        width: 100%;
        text-decoration: none;
        position: relative;
        padding: 8px 30px 8px 20px;
    }

    .sidebar-wrapper .sidebar-menu ul li a i {
        margin-right: 10px;
        font-size: 12px;
        width: 30px;
        height: 30px;
        line-height: 30px;
        text-align: center;
        border-radius: 4px;
    }

    .sidebar-wrapper .sidebar-menu ul li a:hover>i::before {
        display: inline-block;
        animation: swing ease-in-out 0.5s 1 alternate;
    }

    .sidebar-wrapper .sidebar-menu .sidebar-dropdown>a:after {
        font-family: "Font Awesome 5 Free";
        font-weight: 900;
        content: "\f105";
        font-style: normal;
        display: inline-block;
        font-style: normal;
        font-variant: normal;
        text-rendering: auto;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-align: center;
        background: 0 0;
        position: absolute;
        right: 15px;
        top: 14px;
    }

    .sidebar-wrapper .sidebar-menu .sidebar-dropdown .sidebar-submenu ul {
        padding: 5px 0;
    }

    .sidebar-wrapper .sidebar-menu .sidebar-dropdown .sidebar-submenu li {
        padding-left: 25px;
        font-size: 13px;
    }

    .sidebar-wrapper .sidebar-menu .sidebar-dropdown .sidebar-submenu li a:before {
        content: "\f111";
        font-family: "Font Awesome 5 Free";
        font-weight: 400;
        font-style: normal;
        display: inline-block;
        text-align: center;
        text-decoration: none;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        margin-right: 10px;
        font-size: 8px;
    }

    .sidebar-wrapper .sidebar-menu ul li a span.label,
    .sidebar-wrapper .sidebar-menu ul li a span.badge {
        float: right;
        margin-top: 8px;
        margin-left: 5px;
    }

    .sidebar-wrapper .sidebar-menu .sidebar-dropdown .sidebar-submenu li a .badge,
    .sidebar-wrapper .sidebar-menu .sidebar-dropdown .sidebar-submenu li a .label {
        float: right;
        margin-top: 0px;
    }

    .sidebar-wrapper .sidebar-menu .sidebar-submenu {
        display: none;
    }

    .sidebar-wrapper .sidebar-menu .sidebar-dropdown.active>a:after {
        transform: rotate(90deg);
        right: 17px;
    }

    /*--------------------------side-footer------------------------------*/

    .sidebar-footer {
        position: absolute;
        width: 100%;
        bottom: 0;
        display: flex;
    }

    .sidebar-footer>a {
        flex-grow: 1;
        text-align: center;
        height: 30px;
        line-height: 30px;
        position: relative;
    }

    .sidebar-footer>a .notification {
        position: absolute;
        top: 0;
    }

    .badge-sonar {
        display: inline-block;
        background: #980303;
        border-radius: 50%;
        height: 8px;
        width: 8px;
        position: absolute;
        top: 0;
    }

    .badge-sonar:after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        border: 2px solid #980303;
        opacity: 0;
        border-radius: 50%;
        width: 100%;
        height: 100%;
        animation: sonar 1.5s infinite;
    }

    /*--------------------------page-content-----------------------------*/

    .page-wrapper .page-content {
        display: inline-block;
        width: 100%;
        padding-left: 0px;
        padding-top: 20px;
    }

    .page-wrapper .page-content>div {
        padding: 20px 40px;
    }

    .page-wrapper .page-content {
        overflow-x: hidden;
    }

    /*------scroll bar---------------------*/

    ::-webkit-scrollbar {
        width: 5px;
        height: 7px;
    }

    ::-webkit-scrollbar-button {
        width: 0px;
        height: 0px;
    }

    ::-webkit-scrollbar-thumb {
        background: #525965;
        border: 0px none #ffffff;
        border-radius: 0px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #525965;
    }

    ::-webkit-scrollbar-thumb:active {
        background: #525965;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
        border: 0px none #ffffff;
        border-radius: 50px;
    }

    ::-webkit-scrollbar-track:hover {
        background: transparent;
    }

    ::-webkit-scrollbar-track:active {
        background: transparent;
    }

    ::-webkit-scrollbar-corner {
        background: transparent;
    }


    /*-----------------------------chiller-theme-------------------------------------------------*/

    .chiller-theme .sidebar-wrapper {
        background: #31353D;
    }

    .chiller-theme .sidebar-wrapper .sidebar-header,
    .chiller-theme .sidebar-wrapper .sidebar-search,
    .chiller-theme .sidebar-wrapper .sidebar-menu {
        border-top: 1px solid #3a3f48;
    }

    .chiller-theme .sidebar-wrapper .sidebar-search input.search-menu,
    .chiller-theme .sidebar-wrapper .sidebar-search .input-group-text {
        border-color: transparent;
        box-shadow: none;
    }

    .chiller-theme .sidebar-wrapper .sidebar-header .user-info .user-role,
    .chiller-theme .sidebar-wrapper .sidebar-header .user-info .user-status,
    .chiller-theme .sidebar-wrapper .sidebar-search input.search-menu,
    .chiller-theme .sidebar-wrapper .sidebar-search .input-group-text,
    .chiller-theme .sidebar-wrapper .sidebar-brand>a,
    .chiller-theme .sidebar-wrapper .sidebar-menu ul li a,
    .chiller-theme .sidebar-footer>a {
        color: #818896;
    }

    .chiller-theme .sidebar-wrapper .sidebar-menu ul li:hover>a,
    .chiller-theme .sidebar-wrapper .sidebar-menu .sidebar-dropdown.active>a,
    .chiller-theme .sidebar-wrapper .sidebar-header .user-info,
    .chiller-theme .sidebar-wrapper .sidebar-brand>a:hover,
    .chiller-theme .sidebar-footer>a:hover i {
        color: #b8bfce;
    }

    .page-wrapper.chiller-theme.toggled #close-sidebar {
        color: #bdbdbd;
    }

    .page-wrapper.chiller-theme.toggled #close-sidebar:hover {
        color: #ffffff;
    }

    .chiller-theme .sidebar-wrapper ul li:hover a i,
    .chiller-theme .sidebar-wrapper .sidebar-dropdown .sidebar-submenu li a:hover:before,
    .chiller-theme .sidebar-wrapper .sidebar-search input.search-menu:focus+span,
    .chiller-theme .sidebar-wrapper .sidebar-menu .sidebar-dropdown.active a i {
        color: #16c7ff;
        text-shadow: 0px 0px 10px rgba(22, 199, 255, 0.5);
    }

    .chiller-theme .sidebar-wrapper .sidebar-menu ul li a i,
    .chiller-theme .sidebar-wrapper .sidebar-menu .sidebar-dropdown div,
    .chiller-theme .sidebar-wrapper .sidebar-search input.search-menu,
    .chiller-theme .sidebar-wrapper .sidebar-search .input-group-text {
        background: #3a3f48;
    }

    .chiller-theme .sidebar-wrapper .sidebar-menu .header-menu span {
        color: #6c7b88;
    }

    .chiller-theme .sidebar-footer {
        background: #3a3f48;
        box-shadow: 0px -1px 5px #282c33;
        border-top: 1px solid #464a52;
    }

    .chiller-theme .sidebar-footer>a:first-child {
        border-left: none;
    }

    .chiller-theme .sidebar-footer>a:last-child {
        border-right: none;
    }

    .sidebar-header {
        justify-content: space-between;
        align-items: left;
        padding: 15px;
        color: #959da3;
    }

    .date-time-container {
        font-size: 11px;
        margin-bottom: 10px;
        /* ระยะห่างด้านล่างของเวลา */
    }

    .weather-widget {
        text-align: left;
        order: 1;
        /* เปลี่ยนลำดับการแสดงผล */
    }

    .weather-icon i {
        font-size: 2em;
    }

    .weather-icon {
        margin-bottom: 10px;
    }

    #weather-description,
    #temperature {
        margin-top: 1px;
    }

    /* Responsive Layout */
    @media screen and (max-width: 768px) {
        .sidebar-header {
            flex-direction: column;
            align-items: center;
            /* จัดให้เวลาอยู่ตรงกลาง */
        }

        .date-time-container {
            margin-bottom: 10px;
            align-items: center;
            /* จัดให้เวลาอยู่ตรงกลาง */
        }
    }

    /* CSS */
    #status-text {
        color: green;
        /* สีข้อความ Online */
    }

    #status-text.offline {
        color: red;
        /* สีข้อความ Offline */
    }

    .sidebar-brand {
        font-size: 10px;
    }


    .parent-container {
        text-align: right;
    }

    .back-button,
    .forward-button,
    .logout,
    .refresh-button {
        display: inline-block;
        margin: 10px;
        padding: 6px 16px;
        text-decoration: none;
        font-size: 11px;
        font-weight: bold;
        border-radius: 4px;
        background-color: #818689;
        color: #6b6a6a;
        transition: background-color 0.3s, color 0.3s;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 2;
    }

    .back-button i,
    .forward-button i,
    .logout i,
    .refresh-button i {
        margin-right: 3px;
    }

    .back-button:hover,
    .forward-button:hover,
    .logout:hover,
    .refresh-button:hover {
        background-color: #454748;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }

    #loading-bar-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background-color: #ddd;
        z-index: 9999;
    }

    #loading-bar {
        height: 100%;
        width: 0;
        background-color: #4caf50;
        transition: width 0.3s ease-in-out;
    }


    .box_we {
        width: 48%;
        font-size: x-small;
    }

    .box_we {
        flex-wrap: wrap;
        justify-content: space-between;
        margin: auto;
        margin-top: -1%;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: left;

    }


    .textbox-pair {
        display: flex;
        flex-wrap: wrap;

    }

    .textbox-pair label,
    .textbox-pair input,
    .textbox-pair select {
        flex: 1;
        margin: 3px;

    }

    @media screen and (max-width: 768px) {

        .textbox-pair label,
        .textbox-pair input,
        .textbox-pair select {
            flex: 100%;
            margin: 5px 0;
        }
    }

    .custom-btn {

        color: #fff;
        width: 130px;
        height: 40px;
        padding: 10px 25px;
        font-weight: 500;
        background: transparent;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 20px;
        border-radius: 5px;
        margin-bottom: -25px;
    }

    .button-container {
        display: grid;
        grid-template-columns: repeat(1, auto);
        justify-content: center;
        gap: 30px;

    }

    /* 1 */
    .btn-1 {
        border: none;
        background-color: #007bff;
        box-shadow: 0 0 5px #007bff;
    }

    .btn-1:hover {
        box-shadow: 0 0 10px #1f1d5b, 0 0 20px #007bff, 0 0 20px #fff inset;
        transform: translateY(-4px);
    }

    /* 1 */
    .btn-2 {
        border: none;
        background-color: #4caf50;
        box-shadow: 0 0 5px #4caf50;
    }

    .btn-2:hover {
        box-shadow: 0 0 10px #97efa0, 0 0 20px #4caf50, 0 0 20px #fff inset;
        transform: translateY(-4px);
    }

    /* 1 */
    .btn-3 {
        border: none;
        background-color: #e1cd1c;
        box-shadow: 0 0 5px #e1961c;
    }

    .btn-3:hover {
        box-shadow: 0 0 10px #f0b350, 0 0 20px #e9a436, 0 0 20px #fff inset;
        transform: translateY(-4px);
    }

    .textbox-pair {
            margin-bottom: 5px;
        }

        #max_day,
        #interval {
            width: 7%;
            margin-bottom: 2%;
            margin-top: 1%;
        }
</style>

<body>
    <div id="loading-bar-container">
        <div id="loading-bar"></div>
    </div>
    <div class="parent-container">
        <div class="refresh-button">
            <a href="javascript:location.reload(true)" style="text-decoration: none; color: #fff;">
                <i style="font-size: large;" class="fas fa-sync"></i>
            </a>
        </div>
        <div class="back-button">
            <a href="javascript:history.back()" style="text-decoration: none;color: #fff;">
                <i style="font-size: large;" class="fas fa-arrow-circle-left"></i>
            </a>
        </div>

        <div class="forward-button">
            <a href="javascript:history.forward()" style="text-decoration: none; color: #fff;">
                <i style="font-size: large;" class="fas fa-arrow-circle-right"></i>
            </a>
        </div>

        <a class="logout" href="{{ url_for('home_amr') }}" style="text-decoration: none; color: #fff; font-size: 18px;">
            <i style="margin-left: 5px;" class="fas fa-home"></i> Home
        </a>
    </div>
    <div class="page-wrapper chiller-theme toggled">
        <a id="show-sidebar" class="btn btn-sm btn-dark" href="#">
            <i class="fas fa-bars"></i>
        </a>
        <nav id="sidebar" class="sidebar-wrapper">
            <div class="sidebar-content">
                <div class="sidebar-brand">
                    <a href="#">PTT - Automatic Meter Reading</a>
                    <div id="close-sidebar">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
                <div class="sidebar-header">
                    <div class="user-pic">
                        <img class="img-responsive img-rounded"
                            src="https://www.pttplc.com/uploads/About/about-logo.png" alt="User picture">
                    </div>
                    <div style="margin-left: 2px; margin-top: 5px;" class="user-info">
                        <span style="margin-bottom: 4%;" class="user-name">
                            <strong>{{ username }}</strong>
                        </span>
                        <span class="user-role">Server: AMR</span>
                        <span class="user-status" style="margin-top: 10%;" id="status-container">
                            <i class="fa fa-circle" id="status-icon"></i>
                            <span id="status-text">Online</span>
                            <span style="font-size: 7px;" id="status-last-update">Last Update: <span
                                    id="last-update-time"></span>
                            </span>
                    </div>
                </div>
                <!-- sidebar-header -->
                <div class="sidebar-header">

                    <div class="weather-widget">
                        <div id="weather-icon" class="weather-icon"></div>
                        <p id="weather-description"></p>
                        <p id="temperature"></p>
                    </div>
                    <div class="date-time-container">
                        <p id="date-time"></p>
                    </div>
                </div>

                <!-- sidebar-header -->

                <div class="sidebar-menu">
                    <ul>
                        <li class="header-menu">
                            <span>General</span>
                        </li>
                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fa fa-database"></i>
                                <span>Reports</span>
                                <!-- <span class="badge badge-pill badge-warning">New</span> -->
                            </a>
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="{{ url_for('billing_data') }}">View Monthly Data
                                            <!-- <span class="badge badge-pill badge-success">Pro</span> -->
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">View EVC Status</a>
                                    </li>
                                    <li>
                                        <a href="#">Daily Summary</a>
                                    </li>
                                    <li>
                                        <a href="#">Monthly Summery</a>
                                    </li>
                                    <li>
                                        <a href="#">Site Detail</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fas fa-clipboard-list"></i>
                                <span>Manage Users</span>
                                <!-- <span class="badge badge-pill badge-danger">3</span> -->
                            </a>
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="#">Add User

                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">Edit User</a>
                                    </li>
                                    <li>
                                        <a href="#">Remove User</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fas fa-file-alt"></i>
                                <span>Manage Sites</span>
                            </a>
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="#">Add Site</a>
                                    </li>
                                    <li>
                                        <a href="#">Edit Site</a>
                                    </li>
                                    <li>
                                        <a href="#">Remove Site</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fas fa-wrench"></i>
                                <span>Polling Setting</span>
                            </a>
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="#">EVC Management</a>
                                    </li>
                                    <li>
                                        <a href="{{ url_for('polling_route') }}">Polling Range Setting</a>
                                    </li>
                                    <li>
                                        <a href="mapping_config">Configuration Mapping</a>
                                    </li>
                                    <li>
                                        <a href="mapping_billing">Daily Billing Mapping</a>
                                    </li>
                                    <li>
                                        <a href="#">Hourly Billing Mapping</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="sidebar-dropdown">
                            <a href="#">
                                <i class="fas fa-search"></i>
                                <span>Polling Actions</span>
                            </a>
                            <div class="sidebar-submenu">
                                <ul>
                                    <li>
                                        <a href="Manualpoll_data">Manual Poll (EVC Profile)</a>
                                    </li>
                                    <li>
                                        <a href="write_evc">Write Config (SG,Co2,N2)</a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="header-menu">
                            <!-- <span>Extra</span> -->
                        </li>
                        <li>
                            <!-- <a href="#">
                                <i class="fa fa-book"></i>
                                <span>Documentation</span>
                                <span class="badge badge-pill badge-primary">Beta</span>
                            </a> -->
                        </li>
                    </ul>
                </div>
                <!-- sidebar-menu  -->
            </div>
            <!-- sidebar-content  -->
            <div class="sidebar-footer">
                <!-- <a href="#">
          <i class="fa fa-bell"></i>
          <span class="badge badge-pill badge-warning notification">3</span>
        </a> -->
                <!-- <a href="#">
          <i class="fa fa-envelope"></i>
          <span class="badge badge-pill badge-success notification">7</span>
        </a> -->
                <!-- <a href="#">
          <i class="fa fa-cog"></i>
          <span class="badge-sonar"></span>
        </a> -->
                <a href="{{ url_for('logout') }}">
                    <i class="fa fa-power-off" style="margin-right: 5px;"></i>Logout
                </a>
            </div>
        </nav>
        <!-- sidebar-wrapper  -->
        <main class="page-content" style="margin-top: -5%;">
            <div class="container">
                <h2>Mapping Billing</h2>
                <hr>
                <div class="row">
                    <div class="form-group col-md-12">
                        <form id="mapping_configForm" method="get" action="{{ url_for('mapping_billing_route') }}"
                            class="form-inline">
                            <label style="font-size: large;" for="type_dropdown">Select Type:</label>
                            <select id="type_dropdown" name="type_dropdown" class="form-control">
                                <option value="" {% if selected_type=="" %}selected{% endif %}>-- Select Type --</option>
                                {% for type in type_options %}
                                <option value="{{ type }}" {% if selected_type==type %}selected{% endif %}>{{ type }}</option>
                                {% endfor %}
                            </select>
                            <button style="height: fit-content; margin-left: 20px;" class="btn btn-primary"
                                type="submit">View</button>
                        </form>
    
                        <form method="POST" action="/update_mapping_billing_route">
                            <input type="hidden" name="selected_type" value="{{ selected_type }}">
                            <label for="max_day">Max day:</label>
                            <input style="width: 7%; margin-bottom: 1%; margin-top: 2%;" type="text" id="max_day"
                                name="max_day" value="{{ max_daily_value }}" >
                            {% for i in range(0, list_address|length) %}
                            <div class="textbox-pair">
                                <label for="address{{ '{:02d}'.format(i) }}">Address {{ '{:02d}'.format(i + 1) }}</label>
                                <input type="text" id="list_address{{ '{:02d}'.format(i) }}"
                                    name="list_address{{ '{:02d}'.format(i) }}" value="{{ list_address[i] }}"
                                    >
    
                                <label for="description{{ '{:02d}'.format(i) }}">Description {{ '{:02d}'.format(i + 1)
                                    }}</label>
                                <input type="text" id="list_description{{ '{:02d}'.format(i) }}"
                                    name="list_description{{ '{:02d}'.format(i) }}" value="{{ list_description[i] }}"
                                    >
    
                                <label for="data_type{{ '{:02d}'.format(i) }}">Data Type {{ '{:02d}'.format(i + 1) }}</label>
                                <select id="text{{ '{:02d}'.format(i) }}" name="list_data_type{{ '{:02d}'.format(i) }}"
                                    >
                                    <option value="None" {% if list_data_type[i]=='None' %} selected {% endif %}>None
                                    </option>
                                    <option value="Date" {% if list_data_type[i]=='Date' %} selected {% endif %}>Date
                                    </option>
                                    <option value="Ulong" {% if list_data_type[i]=='Ulong' %} selected {% endif %}>Ulong
                                    </option>
                                    <option value="Float" {% if list_data_type[i]=='Float' %} selected {% endif %}>Float
                                    </option>
                                </select>
    
                                <label for="daily{{ '{:02d}'.format(i) }}">Daily {{ '{:02d}'.format(i + 1) }}</label>
                                <input style="width: 7%;" type="text" id="list_daily{{ '{:02d}'.format(i) }}"
                                    name="list_daily{{ '{:02d}'.format(i) }}" value="{{ list_daily[i] }}"
                                    >
                            </div>
                            {% endfor %}
    
                            <label for="interval">Interval:</label>
                            <input style="width: 7%; margin-top: 1%; margin-bottom: 2%;" type="text" id="interval"
                                name="interval" value="{{ interval }}" placeholder="Enter interval value"
                                >
                            <br>
                            <input class="btn btn-success" type="submit" value="Submit">
                        </form>
                    </div>
                </div>
            </div>
        </main>
    <!-- page-content" -->
    </div>
    <!-- page-wrapper -->

</body>
<script>
    function submitForm() {
        // Trigger the form submission
        document.getElementById("mapping_billingForm").submit();
    }

    // Add an event listener to dynamically update the dropdown options
    document.getElementById("type_dropdown").addEventListener("change", function () {
        // Get the selected value
        var selectedtype = this.value;

        // Hide the "All" option if no type is selected
        var allOption = this.options[0];
        if (selectedtype) {
            allOption.style.display = "none";
        } else {
            allOption.style.display = "block";
        }

    });
</script>
<script>
    // Function to show the loading bar
    function showLoadingBar() {
        document.getElementById('loading-bar').style.width = '100%';
    }

    // Function to hide the loading bar
    function hideLoadingBar() {
        document.getElementById('loading-bar').style.width = '0';
    }

    // Event listener for page load
    window.addEventListener('load', function () {
        hideLoadingBar(); // Hide the loading bar initially
    });

    // Event listener for beforeunload (when the page is about to be reloaded)
    window.addEventListener('beforeunload', function () {
        showLoadingBar(); // Show the loading bar before the page reloads
    });

</script>
<script>
    function checkInternetConnection() {
        // ตรวจสอบสถานะเชื่อมต่ออินเทอร์เน็ต
        // ตรวจสอบได้ว่ามีการเชื่อมต่อหรือไม่ โดยใช้ navigator.onLine
        return navigator.onLine;
    }

    // JavaScript
    function updateStatus() {
        var statusContainer = document.getElementById('status-container');
        var statusIcon = document.getElementById('status-icon');
        var statusText = document.getElementById('status-text');
        var lastUpdate = document.getElementById('last-update-time');

        var now = new Date();
        var timeString = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true });

        if (checkInternetConnection()) {
            // ถ้าเชื่อมต่ออินเทอร์เน็ต
            statusIcon.style.color = 'green'; // สีเขียว
            statusText.textContent = 'Online';
            statusText.classList.remove('offline'); // ลบ class 'offline' ถ้ามี
        } else {
            // ถ้าไม่เชื่อมต่ออินเทอร์เน็ต
            statusIcon.style.color = 'red'; // สีแดง
            statusText.textContent = 'Offline';
            statusText.classList.add('offline'); // เพิ่ม class 'offline'
        }

        lastUpdate.textContent = timeString;
    }
    // JavaScript
    setInterval(updateStatus, 10000); // อัปเดตทุก 1 วินาที (1000 มิลลิวินาที)

</script>
<script>
    // Function to update weather icon
    function updateWeatherIcon(weatherCondition) {
        var iconClass;

        // Add logic to determine the appropriate weather icon based on the condition
        switch (weatherCondition.toLowerCase()) {
            case 'clear':
                iconClass = 'fas fa-sun'; // Font Awesome sun icon
                break;
            case 'clouds':
                iconClass = 'fas fa-cloud'; // Font Awesome cloud icon
                break;
            case 'rain':
                iconClass = 'fas fa-cloud-showers-heavy'; // Font Awesome rain icon
                break;
            case 'thunderstorm':
                iconClass = 'fas fa-bolt'; // Font Awesome thunderstorm icon
                break;
            case 'snow':
                iconClass = 'fas fa-snowflake'; // Font Awesome snow icon
                break;
            default:
                iconClass = 'fas fa-question-circle'; // Default to a question mark icon for unknown conditions
        }

        // Set the appropriate icon class
        document.getElementById('weather-icon').innerHTML = '<i class="' + iconClass + '"></i>';
    }

</script>
<script>
    // Function to update date and time
    function updateDateTime() {
        var now = new Date();
        var dateTimeString = now.toLocaleString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: false });
        document.getElementById('date-time').textContent = dateTimeString;
    }

    // Function to update weather data from OpenWeatherMap API
    function updateWeatherData() {
        // Replace 'YOUR_API_KEY' with your actual OpenWeatherMap API key
        var apiKey = 'fbae867d03fc9892a7469d2f562ce558';
        var city = 'Bangkok'; // Replace with your city name
        var apiUrl = 'https://api.openweathermap.org/data/2.5/weather?q=' + city + '&appid=' + apiKey;

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                // Extract relevant weather data
                var weatherCondition = data.weather[0].main;
                var weatherDescription = data.weather[0].description;
                var temperatureKelvin = data.main.temp;

                // Convert temperature from Kelvin to Celsius
                var temperatureCelsius = temperatureKelvin - 273.15;

                // Update weather icon, description, and temperature
                updateWeatherIcon(weatherCondition);
                document.getElementById('weather-description').textContent = 'Weather: ' + weatherDescription;
                document.getElementById('temperature').textContent = 'Temperature: ' + temperatureCelsius.toFixed(2) + '°C';
            })
            .catch(error => console.error('Error fetching weather data:', error));
    }


    // Function to update weather icon
    function updateWeatherIcon(weatherCondition) {
        var iconClass;

        // Add logic to determine the appropriate weather icon based on the condition
        switch (weatherCondition.toLowerCase()) {
            case 'clear':
                iconClass = 'fa-sun';
                break;
            case 'clouds':
                iconClass = 'fa-cloud';
                break;
            case 'rain':
                iconClass = 'fa-cloud-showers-heavy';
                break;
            default:
                iconClass = 'fa-question-circle'; // Default to a question mark icon for unknown conditions
        }

        // Set the appropriate icon class
        document.getElementById('weather-icon').innerHTML = '<i class="fa ' + iconClass + '" aria-hidden="true"></i>';
    }

    // Call the functions initially
    updateDateTime();
    updateWeatherData();

    // Update date and time every second
    setInterval(updateDateTime, 1000);

    // Update weather data every 10 minutes (adjust as needed)
    setInterval(updateWeatherData, 600000);
</script>
<script>
    $(".sidebar-dropdown > a").click(function () {
        $(".sidebar-submenu").slideUp(200);
        if (
            $(this)
                .parent()
                .hasClass("active")
        ) {
            $(".sidebar-dropdown").removeClass("active");
            $(this)
                .parent()
                .removeClass("active");
        } else {
            $(".sidebar-dropdown").removeClass("active");
            $(this)
                .next(".sidebar-submenu")
                .slideDown(200);
            $(this)
                .parent()
                .addClass("active");
        }
    });

    $("#close-sidebar").click(function () {
        $(".page-wrapper").removeClass("toggled");
    });
    $("#show-sidebar").click(function () {
        $(".page-wrapper").addClass("toggled");
    });



</script>